<div id="TipInfoBox" class="card card-default">
	<div class="card-header" (click)="toggleColapse(); utilsService.stopPropagation($event)">
		<div>
			<span class="d-flex justify-content-between">
				<span>
					<span *ngIf="wbtipService.tip.data.whistleblower_identity">{{'Identity'|translate}}</span>
					<span
						*ngIf="!wbtipService.tip.data.whistleblower_identity">{{wbtipService.tip.whistleblower_identity_field.label}}</span>
					<span *ngIf="wbtipService.tip.data.whistleblower_identity_provided"
						class="btn btn-sm btn-link"><span *ngIf="collapsed">{{'Show'|translate}}</span><span
							*ngIf="!collapsed">{{'Hide'|translate}}</span></span>
				</span>
				<span class="float-right">
					<i *ngIf="!collapsed" class="fa-solid fa-chevron-up" data-toggle="tooltip"
						title="{{'Collapse' | translate}}"></i>
					<i *ngif="collapsed" class="fa-solid fa-chevron-down" data-toggle="tooltip"
						title="{{'Expand' | translate}}"></i>
				</span>
			</span>
		</div>
	</div>
	<div class="card-body" *ngIf="!collapsed">
		<div *ngIf="wbtipService.tip.data.whistleblower_identity">
			<div *ngFor="let field of wbtipService.tip.whistleblower_identity_field.children; let index = index">
				<src-tip-field [fields]=field [fieldAnswers]=wbtipService.tip.data.whistleblower_identity
					[index]="index"></src-tip-field>
			</div>

		</div>
		<div *ngIf="wbtipService.tip.status !== 'closed' && !wbtipService.tip.data.whistleblower_identity">
			<form #wbform="ngForm">
				<src-whistleblower-identity-field></src-whistleblower-identity-field>
				<src-rfile-upload-status></src-rfile-upload-status>
				<div id="SubmitBox">
					<button id="SubmitButton" class="btn btn-primary float-right"
						(click)="provideIdentityInformation(wbtipService.tip.data.whistleblower_identity.id, wbtipService.tip.answers)"
						[disabled]="wbform.invalid" type="submit">
						<i id="SubmitIconOK" class="fa-solid fa-check"></i>
						<span>{{'Submit'|translate}}</span>
					</button>
				</div>
			</form>
		</div>
	</div>
</div>